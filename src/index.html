<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <el-container>
        <el-main class="tab_main">
            <el-tabs :tab-position="tabPosition" class="custom-tabs">
                <el-tab-pane class="main_list" label="插件包下载">
                    <el-table
                    class="el-table-custom"
                    :data="tableData"
                    :show-header="false"
                    style="width: 100%">
                    <el-table-column
                        prop="date"
                        label="日期"
                        width="400">
                    </el-table-column>
                    <el-table-column
                        prop="name"
                        label="姓名">
                    </el-table-column>
                    <el-table-column
                        prop="address"
                        label="地址">
                        <template slot-scope="scope">
                            <el-button
                                     @click="handleDownload()"
                                    type="text"
                                    size="small">
                                {{ scope.row.address }}
                            </el-button>
                        </template>
                    </el-table-column>
                    </el-table>
                </el-tab-pane>
                <el-tab-pane label="客户端下载">插件下载</el-tab-pane>
            </el-tabs>
        </el-main>
        <el-footer style="padding-top: 10px; background-color: #f0f0f0;border-top:1px solid #e5e5e5;">
            <el-row style="line-height: 40px">
                <el-col :span="6">
                    <div class="grid-content bg-purple">
                        <el-select v-model="wow_version" placeholder="切换版本">
                        <el-option
                                v-for="item in wowVersionList"
                                :key="item.value"
                                :label="item.label"
                                :value="item.value">
                        </el-option>
                    </el-select></div>
                </el-col>
                <el-col :span="12">
                    <div class="grid-content"><span style="color: #606266;font-size: 12px">wow文件路径 D:/Users/habby/Downloads/wow.exe</span>
                        <el-button  size="mini" type="warning" @click="selectFile"  round>修改</el-button>

                    </div>
                </el-col>
                <el-col type="flex" justify="center"  :span="6">
                    <div class="grid-content bg-purple-light">
                        <el-button type="success" class="el-button-custom" round>开始</el-button>
                    </div>
                </el-col>
            </el-row>
        </el-footer>
    </el-container>
</div>
</body>
<style>


</style>
<link rel="stylesheet" href="./css/index.css">
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue@2/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="./lib/index.js"></script>
<script>

    new Vue({
        el: '#app',
        created:function(){
            this.make_table()
        },
        data: function () {
            return {
                visible: false,
                tabPosition: 'left',
                activeName: 'first',
                is_show_Header: false,
                wowVersionList: [{
                    value: '2.43',
                    label: 'TBC'
                }, {
                    value: '3.35',
                    label: 'WLK'
                }],
                wow_version: '2.43',
                tableData: []
            }
        },
        methods: {
            handleClick(tab, event) {
                console.log(tab, event);
            },
            handleDownload() {
                const result =  window.electronAPI.downloadFile("https://cdn.wow-china.gg/clients/TBC_335/Full.zip");
                if (result.success) {
                    console.log('Download started');
                    statusText.textContent = 'Download started...';
                }
            },
            async selectFile() {
                try {
                    const filePaths = await window.electronAPI.getfile();
                    this.filePath = filePaths[0];

                    console.log('File paths:', filePaths);

                } catch (error) {
                    console.error('Error selecting file:', error);
                }
            },
            make_table(){
                for(var i=0;i<50;i++){
                    aa = {
                        img: 'https://image.nfuwow.com//Uploads/2024-02-03/65bdcc5760c24.webp',
                        date: 'NaowhUI带335全职业的WA字符串',
                        name: '2024-06-05',
                        address: 'dwon'
                    }
                    this.tableData.push(aa)
                }
            }

        }
    })

</script>
</html>

